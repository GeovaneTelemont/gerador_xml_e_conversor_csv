{% extends "base.html" %}

{% block title %}Gerador de XML para Edifica√ß√µes{% endblock %}

{% block page_title %}üìÅ Gerador de XML para Edifica√ß√µes{% endblock %}

{% block page_subtitle %}
<p class="lead">Fa√ßa upload de um arquivo CSV para gerar arquivos XML</p>
{% endblock %}

{% block extra_css %}
<link rel="stylesheet" href="{{ url_for('static', filename='css/index.css') }}">
{% endblock %}

{% block content %}
<div class="row mt-4">
    <div class="col-12">
        <div class="upload-box rounded-3">
            <form method="POST" enctype="multipart/form-data">
                <div class="mb-3">
                    <label for="file" class="form-label">Selecione o arquivo CSV:</label>
                    <input class="form-control" type="file" name="file" id="file" accept=".csv" required>
                </div>
                <button type="submit" class="btn btn-custom btn-lg">
                    üì§ Processar Arquivo
                </button>
            </form>
        </div>
    </div>
</div>

<!-- NOVA SE√á√ÉO: Cards lado a lado -->
<div class="row mt-5">
    <!-- Card do Modelo CSV -->
    <div class="col-md-6 mb-4">
        <div class="card h-100">
            <div class="card-body text-center">
                <i class="fas fa-file-download fa-3x text-success mb-3"></i>
                <h5 class="card-title">üì• Modelo CSV</h5>
                <p class="card-text">Baixe o modelo CSV para usar no gerador de XML</p>
                <!-- CORRE√á√ÉO: Usar o endpoint correto -->
                <a href="{{ url_for('main.download_modelo_csv') }}" class="btn btn-success">
                    <i class="fas fa-file-excel"></i> Baixar Modelo CSV
                </a>
            </div>
        </div>
    </div>
    
    <!-- Card do Conversor CSV -->
    <div class="col-md-6 mb-4">
        <div class="card h-100">
            <div class="card-body text-center">
                <i class="fas fa-exchange-alt fa-3x text-primary mb-3"></i>
                <h5 class="card-title">üîÑ Conversor CSV</h5>
                <p class="card-text">Converta Enderecos_Totais_CO.csv para formato Power Query</p>
                <a href="{{ url_for('main.conversor_csv') }}" class="btn btn-primary">
                    <i class="fas fa-cogs"></i> Acessar Conversor
                </a>
            </div>
        </div>
    </div>
</div>

<div class="row mt-4">
    <div class="col-12">
        <div class="card">
            <div class="card-header">
                <h5>‚ÑπÔ∏è Informa√ß√µes do CSV</h5>
            </div>
            <div class="card-body">
            <p><strong>Tem duas forma de gerar o XML:</strong></p>
                <ul>
                    <li><strong>Com dois complementos:</strong> Preencher as colunas COMPLEMENTO e COMPLEMENTO2 e deixar a coluna COMPLEMENTO3 vazia</li>
                    <li><strong>Com tr√™s complementos:</strong> Preencher as colunas COMPLEMENTO, COMPLEMENTO2 e RESULTADO</li>
                </ul>
            <br>
            <p><strong>O arquivo CSV deve conter as seguintes colunas:</strong></p>
            <ul>
                <li>COMPLEMENTO, COMPLEMENTO2, RESULTADO</li>
                <li>LATITUDE, LONGITUDE, COD_ZONA</li>
                <li>LOCALIDADE, LOGRADOURO, BAIRRO</li>
                <li>MUNICIPIO, UF, COD_LOGRADOURO</li>
                <li>ID_ENDERECO, ID_ROTEIRO, ID_LOCALIDADE</li>
                <li>CEP, NUM_FACHADA, COD_SURVEY</li>
                <li>QUANTIDADE_UMS, UCS_RESIDENCIAIS, UCS_COMERCIAIS</li>
            </ul>
            <p><strong>Separador:</strong> Ponto e v√≠rgula (;)</p>
            </div>
        </div>
    </div>
</div>
{% endblock %}

{% block scripts %}
<script src="{{ url_for('static', filename='js/index.js') }}"></script>
{% endblock %}